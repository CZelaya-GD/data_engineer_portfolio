version: '3.8'

services: 
  hn_dashboard: 

    build: .      # <- Build from Dockerfile

    ports: 
      - "5000:5000"      # <- Host: Container port
    
    volumes: 
      - ./data:/app/data   # Persist hn_posts.db

    environment: 
      - DATABASE_NAME=hn_posts   # Configurable

    restart: unless-stopped     # <- Auto-restart on crash

    healthcheck: 
      test: ["CMD", "curl", "-f", "http://localhost:5000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
